
%(c) 2013 The Polywell Guy - http://thepolywellblog.blogspot.com/

Parameters = struct('a',0,'Mu',0,'Current',0,'Turns',0,'epsilon',0);
Parameters.a = 0.127;
Parameters.Mu = 0.00000125663706;
Parameters.Current = 100;
Parameters.Turns = 200;
Parameters.epsilon = 0.0000000000088541878;




disp(' ');
disp('Hello!');
disp(' ');
disp('This code finds the energy density generated by a single ring of current.');
disp('The energy density is entirely magnetic field driven.');
disp('It sets up a matrix of points with a height and width centered on the (0,0) point.');
disp('The ring sits along the Y axis.');
disp(' ');

T1 = 'The ring has a radius of :';
T2 = num2str(Parameters.a);
T3 = ' (Meters)';
disp(strcat(T1,T2,T3));

T1 = 'The ring has :';
T2 = num2str(Parameters.Current*Parameters.Turns);
T3 = ' (AmpTurns)';
disp(strcat(T1,T2,T3));
disp(' ');



Hieght = input('Hieght? (suggest: 0.35):');
Width = input('Width? (suggest: 0.65):');
Cells = input('Number of Cells? :');



%Bounds of Model 
Bounds = struct('XNeg',-(Width/2),'XPos',(Width/2),'YNeg',-(Hieght/2),'YPos',(Hieght/2));


%This function sets up the points in the XY plane, saved in a matrix
Coordinates = MakeMatrix(Bounds, Cells);

%This function calculates the Magnetic field strength for each point
VectorField = CalcField(Coordinates, Parameters, Cells);



% Plotting Function
LineNumber = input('Number of Countours? :');
TextNumber = input('Size to Label? :');
X = Coordinates.XCor(:,:);
Y = Coordinates.YCor(:,:); 
Field = VectorField.EnergyDensity(:,:);
[C,h] = contour(X,Y,Field, LineNumber);
set(h,'ShowText','on','TextStep',get(h,'LevelStep')*TextNumber)
colormap cool
clear('X','Y','Field','LineNumber','TextNumber');
disp(' ');



clear('Hieght', 'Width','Cells', 'Selector','T1','T2','T3','h','C');









